<!DOCTYPE html>
<html>
<head>
    <title>PCC Road Estimate Calculator</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 2em; background: #f4f8fc; }
        table { border-collapse: collapse; width: 100%; margin-top: 18px;}
        th, td { border: 1px solid #bbb; padding: 6px 10px; text-align: center; }
        th { background: #e3eafc; }
        input[type="number"] { width: 70px; }
        .btn { background: #24416b; color: #fff; border:none; padding:7px 16px; border-radius:3px; cursor:pointer; }
        .section { margin-bottom: 2em; }
        #pdf-section { background: #fff; padding: 2em; }
    </style>
</head>
<body>
    <h2 style="text-align:center;">PCC Road Detailed Estimate Calculator</h2>
    <div>
        <table>
            <tr>
                <th>Item</th>
                <th>Length (ft)</th>
                <th>Breadth (ft)</th>
                <th>Thickness (ft)</th>
                <th>Rate</th>
            </tr>
            <tr>
                <td>Earthwork (m³)</td>
                <td><input type="number" id="ew_len" value="100"></td>
                <td><input type="number" id="ew_bre" value="10"></td>
                <td><input type="number" id="ew_thi" value="0.83"></td>
                <td><input type="number" id="ew_rate" value="630.70"></td>
            </tr>
            <tr>
                <td>Sand Filling (m³)</td>
                <td><input type="number" id="sf_len" value="100"></td>
                <td><input type="number" id="sf_bre" value="10"></td>
                <td><input type="number" id="sf_thi" value="0.50"></td>
                <td><input type="number" id="sf_rate" value="354.10"></td>
            </tr>
            <tr>
                <td>Brick Soling (m²)</td>
                <td><input type="number" id="bs_len" value="100"></td>
                <td><input type="number" id="bs_bre" value="10"></td>
                <td><input type="number" id="bs_thi" value="0" disabled></td>
                <td><input type="number" id="bs_rate" value="353.10"></td>
            </tr>
            <tr>
                <td>PCC (m³)</td>
                <td><input type="number" id="cc_len" value="100"></td>
                <td><input type="number" id="cc_bre" value="10"></td>
                <td><input type="number" id="cc_thi" value="0.50"></td>
                <td><input type="number" id="cc_rate" value="5607.00"></td>
            </tr>
            <tr>
                <td>Shuttering (m²)</td>
                <td><input type="number" id="sh_len" value="100"></td>
                <td><input type="number" id="sh_bre" value="0.5"></td>
                <td><input type="number" id="sh_thi" value="0" disabled></td>
                <td><input type="number" id="sh_rate" value="263.90"></td>
            </tr>
        </table>
        <br>
        <button class="btn" onclick="runEstimate()">Generate Estimate</button>
        <button class="btn" onclick="printPDF()">Print Detailed Estimate PDF</button>
    </div>
    <div id="pdf-section"></div>
<script>
function ft3_to_m3(ft3) { return ft3 * 0.0283168; }
function ft2_to_m2(ft2) { return ft2 * 0.092903; }

function runEstimate() {
    // Input values
    let ew_len = parseFloat(document.getElementById("ew_len").value);
    let ew_bre = parseFloat(document.getElementById("ew_bre").value);
    let ew_thi = parseFloat(document.getElementById("ew_thi").value);
    let ew_rate = parseFloat(document.getElementById("ew_rate").value);

    let sf_len = parseFloat(document.getElementById("sf_len").value);
    let sf_bre = parseFloat(document.getElementById("sf_bre").value);
    let sf_thi = parseFloat(document.getElementById("sf_thi").value);
    let sf_rate = parseFloat(document.getElementById("sf_rate").value);

    let bs_len = parseFloat(document.getElementById("bs_len").value);
    let bs_bre = parseFloat(document.getElementById("bs_bre").value);
    let bs_rate = parseFloat(document.getElementById("bs_rate").value);

    let cc_len = parseFloat(document.getElementById("cc_len").value);
    let cc_bre = parseFloat(document.getElementById("cc_bre").value);
    let cc_thi = parseFloat(document.getElementById("cc_thi").value);
    let cc_rate = parseFloat(document.getElementById("cc_rate").value);

    let sh_len = parseFloat(document.getElementById("sh_len").value);
    let sh_bre = parseFloat(document.getElementById("sh_bre").value);
    let sh_rate = parseFloat(document.getElementById("sh_rate").value);

    // Quantity Calculations
    let ew_ft3 = ew_len * ew_bre * ew_thi;
    let ew_m3 = ft3_to_m3(ew_ft3);
    let ew_amt = ew_m3 * ew_rate;

    let sf_ft3 = sf_len * sf_bre * sf_thi;
    let sf_m3 = ft3_to_m3(sf_ft3);
    let sf_amt = sf_m3 * sf_rate;

    let bs_ft2 = bs_len * bs_bre;
    let bs_m2 = ft2_to_m2(bs_ft2);
    let bs_amt = bs_m2 * bs_rate;

    let cc_ft3 = cc_len * cc_bre * cc_thi;
    let cc_m3 = ft3_to_m3(cc_ft3);
    let cc_amt = cc_m3 * cc_rate;

    let sh_ft2 = sh_len * sh_bre;
    let sh_m2 = ft2_to_m2(sh_ft2);
    let sh_amt = sh_m2 * sh_rate;

    // Carriage Quantity Calculations (Auto formulas based on project logic)
    let qty_bricks = bs_m2 / 31;      // Example formula: m2 brick soling / 31 = thousand bricks
    let qty_lsand = sf_m3 + cc_m3*0.5; // Example: sand filling + half of PCC volume
    let qty_csand = cc_m3 * 0.445;     // Example: PCC volume x 0.445
    let qty_schips = cc_m3 * 0.89;     // Example: PCC chips = PCC volume x 0.89
    let qty_cement = cc_m3 * 6.4 / 1000 * 50; // Example: PCC volume x 6.4 bags per m3, 50kg/bag, in MT

    // Set carriage rates (editable as per SOR)
    let rate_bricks = 1404.81;
    let rate_lsand  = 354.55;
    let rate_csand  = 1536.67;
    let rate_schips = 1466.56;
    let rate_cement = 622.82;

    let cb = qty_bricks * rate_bricks;
    let cl = qty_lsand * rate_lsand;
    let cc_s = qty_csand * rate_csand;
    let cs = qty_schips * rate_schips;
    let cem = qty_cement * rate_cement;

    let main_total = ew_amt + sf_amt + bs_amt + cc_amt + sh_amt;
    let carriage_total = cb + cl + cc_s + cs + cem;
    let grand_total = main_total + carriage_total;

    // Output HTML for PDF print
    document.getElementById("pdf-section").innerHTML = `
        <h3 style="text-align:center;">Detailed Estimate Statement</h3>
        <table>
            <tr><th>Sr.No.</th><th>Description</th><th>Qty</th><th>Unit</th><th>Rate</th><th>Amount</th></tr>
            <tr><td>1</td><td>Earthwork</td><td>${ew_m3.toFixed(2)}</td><td>m³</td><td>${ew_rate}</td><td>${ew_amt.toFixed(2)}</td></tr>
            <tr><td>2</td><td>Sand Filling</td><td>${sf_m3.toFixed(2)}</td><td>m³</td><td>${sf_rate}</td><td>${sf_amt.toFixed(2)}</td></tr>
            <tr><td>3</td><td>Brick Soling</td><td>${bs_m2.toFixed(2)}</td><td>m²</td><td>${bs_rate}</td><td>${bs_amt.toFixed(2)}</td></tr>
            <tr><td>4</td><td>PCC</td><td>${cc_m3.toFixed(2)}</td><td>m³</td><td>${cc_rate}</td><td>${cc_amt.toFixed(2)}</td></tr>
            <tr><td>5</td><td>Shuttering</td><td>${sh_m2.toFixed(2)}</td><td>m²</td><td>${sh_rate}</td><td>${sh_amt.toFixed(2)}</td></tr>
        </table>
        <h3>Carriage of Material</h3>
        <table>
            <tr><th>Material</th><th>Qty</th><th>Rate</th><th>Amount</th></tr>
            <tr><td>Bricks</td><td>${qty_bricks.toFixed(3)} th</td><td>${rate_bricks}</td><td>${cb.toFixed(2)}</td></tr>
            <tr><td>L. Sand</td><td>${qty_lsand.toFixed(2)} m³</td><td>${rate_lsand}</td><td>${cl.toFixed(2)}</td></tr>
            <tr><td>C. Sand</td><td>${qty_csand.toFixed(2)} m³</td><td>${rate_csand}</td><td>${cc_s.toFixed(2)}</td></tr>
            <tr><td>S. Chips</td><td>${qty_schips.toFixed(2)} m³</td><td>${rate_schips}</td><td>${cs.toFixed(2)}</td></tr>
            <tr><td>Cement</td><td>${qty_cement.toFixed(2)} MT</td><td>${rate_cement}</td><td>${cem.toFixed(2)}</td></tr>
            <tr><th colspan="3">Carriage Total</th><th>${carriage_total.toFixed(2)}</th></tr>
        </table>
        <h3>Grand Total: ${grand_total.toFixed(2)}</h3>
    `;
}

// Print only the detailed estimate section
function printPDF() {
    let printContents = document.getElementById('pdf-section').innerHTML;
    let originalContents = document.body.innerHTML;
    document.body.innerHTML = printContents;
    window.print();
    document.body.innerHTML = originalContents;
}
</script>
</body>
</html>
